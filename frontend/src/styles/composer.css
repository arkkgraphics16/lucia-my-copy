/* lucia-secure/frontend/src/styles/composer.css */

/* Vars updated by JS */
:root{
  --composer-h: 72px;       /* actual pixel height of .composer-row */
  --kb-safe: 0px;           /* visualViewport overlap */
  --sidebar-width: 260px;   /* <-- set your desktop sidebar width here (override in global CSS if needed) */
}

/* Textarea sizing (also read in JS) */
.textarea{ --ta-min: 48px; --ta-max: 240px; }

/* ================== WRAPPER: NO PAINT ================== */
/* Fixed, paintless, and non-interactive to avoid any “transparent block” */
.composer{
  position: fixed;
  left: 0; right: 0;
  bottom: var(--kb-safe, 0px);
  height: 0;               /* wrapper occupies no visible height */
  pointer-events: none;    /* wrapper doesn’t catch taps */
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
  z-index: 30;             /* ensure above thread/content */
}

/* The only visible row; positioned at the real bottom */
.composer-row{
  position: absolute;
  left: 12px; right: 12px;                          /* mobile / narrow screens */
  bottom: max(12px, env(safe-area-inset-bottom));
  display: flex; gap: 10px; align-items: flex-end;
  pointer-events: auto;     /* children are interactive */
}

/* On desktop (persistent sidebar), start after the sidebar */
@media (min-width: 1024px){
  .composer-row{
    left: calc(var(--sidebar-width) + 12px);
    overflow: hidden;       /* prevents input shadow from bleeding under sidebar */
  }
}

/* Thread bottom spacing so last message isn’t covered */
.thread{ padding-bottom: calc(var(--composer-h) + 12px); }

/* ================== INPUT ================== */
.textarea{
  flex: 1 1 auto;
  min-height: var(--ta-min);
  max-height: var(--ta-max);
  padding: 12px 14px;
  border-radius: 14px;
  border: 1px solid var(--border);
  background: var(--surface);     /* same tone as chat area */
  color: var(--text);
  resize: none;
  line-height: 1.4;
  box-shadow: 0 10px 26px rgba(0,0,0,.28);  /* subtle 3D */
  outline: none;
  transition: height .12s ease;
}

/* ================== CONTROLS ================== */
.controls{ display:flex; gap:10px; align-items:center; }

/* Squircle send button (blue bg + white right triangle) */
.send-pill{
  appearance:none; border:none; background:transparent;
  padding:0; line-height:0; cursor:pointer;
  width:48px; height:42px; /* matches SVG viewBox */
}
.send-pill svg{ width:48px; height:42px; display:block; }
.pill-bg{ fill: var(--primary); }     /* blue background */
.pill-arrow{ fill: #fff; }            /* white triangle */
.send-pill:disabled{ cursor:default; opacity:.55; }

/* Cancel stays red */
.action-btn.cancel{
  width:46px; height:46px; border-radius:999px;
  display:inline-flex; align-items:center; justify-content:center;
  border:1px solid transparent; background: var(--core); box-shadow: var(--shadow-1);
}

/* Mobile still tracks keyboard safely (wrapper is fixed) */
@media (max-width:768px){
  .thread{ padding-bottom: calc(var(--composer-h) + 18px); }
}

/* ================== HARD KILL ANY BLUR/FROST ================== */
.composer,
.composer *,
.composer::before,
.composer::after,
.composer-row::before,
.composer-row::after{
  -webkit-backdrop-filter: none !important;
  backdrop-filter: none !important;
  filter: none !important;
}
