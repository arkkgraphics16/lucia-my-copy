/* Define CSS custom properties at the root */
:root {
  /* Core color scheme */
  --bg: #0b1621;
  --surface: #0f1b2a;
  --surface-2: #131f30;
  --text: #e6f1ff;
  --muted: #8b9ab5;
  --border: rgba(255, 255, 255, 0.08);
  --primary: #00c2ff;
  --primary-600: #0aa6d9;
  --accent: #00c2ff;
  --core: #ff4757;
  
  /* Shadows */
  --shadow-1: 0 2px 8px rgba(0, 0, 0, 0.15);
  --shadow-2: 0 4px 16px rgba(0, 0, 0, 0.25);
  
  /* Border radius */
  --radius-2: 8px;
  --radius-3: 12px;
  
  /* Force dark color scheme */
  color-scheme: dark;
}

/* Fallback styles with hard-coded values for better compatibility */
* { box-sizing: border-box; }

html, body, #root {
  height: 100%;
  background: #0b1621 !important; /* Dark blue background with !important */
  color: #e6f1ff !important; /* Light text with !important */
}

body {
  margin: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial;
  background: var(--bg, #0b1621); /* Fallback value */
  color: var(--text, #e6f1ff); /* Fallback value */
}

a {
  color: var(--accent, #00c2ff);
  text-decoration: none;
}

.app-shell {
  display: grid;
  grid-template-rows: auto 1fr;
  min-height: 100%;
  background: #0b1621 !important; /* Force dark background */
}

.header {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  border-bottom: 1px solid var(--border, rgba(255, 255, 255, 0.08));
  background: linear-gradient(180deg, var(--surface, #0f1b2a), var(--surface-2, #131f30));
  position: sticky;
  top: 0;
  z-index: 50;
}

.brand {
  display: flex;
  align-items: center;
  gap: 10px;
  font-weight: 700;
  letter-spacing: 0.8px;
}

.brand img {
  width: 28px;
  height: 28px;
}

.brand-title {
  display: flex;
  align-items: center;
  gap: 6px;
}

.brand-title .dot {
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: var(--core, #ff4757);
  box-shadow: 0 0 14px var(--core, #ff4757);
}

.header-actions {
  margin-left: auto;
  display: flex;
  gap: 10px;
}

.btn {
  appearance: none;
  border: 1px solid var(--border, rgba(255, 255, 255, 0.08));
  background: var(--surface-2, #131f30);
  color: var(--text, #e6f1ff);
  padding: 8px 12px;
  border-radius: var(--radius-2, 8px);
  cursor: pointer;
  transition: 0.2s;
  box-shadow: var(--shadow-1, 0 2px 8px rgba(0, 0, 0, 0.15));
}

.btn:hover {
  transform: translateY(-1px);
  border-color: var(--primary, #00c2ff);
}

.btn.primary {
  background: var(--primary, #00c2ff);
  border-color: transparent;
  color: #00131c;
}

.btn.ghost {
  background: transparent;
}

.btn.core {
  background: var(--core, #ff4757);
  color: #fff;
  border-color: transparent;
}

.layout {
  display: grid;
  grid-template-columns: 280px 1fr;
  gap: 0;
  min-height: calc(100vh - 60px);
  background: #0b1621 !important; /* Force dark background */
}

.sidebar {
  background: var(--surface, #0f1b2a);
  border-right: 1px solid var(--border, rgba(255, 255, 255, 0.08));
  padding: 14px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.sidebar h4 {
  margin: 8px 0 4px;
  color: var(--muted, #8b9ab5);
  font-weight: 600;
}

.chip {
  display: inline-block;
  background: var(--surface-2, #131f30);
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid var(--border, rgba(255, 255, 255, 0.08));
  margin: 4px 6px 0 0;
  cursor: pointer;
}

.chip:hover {
  border-color: var(--primary, #00c2ff);
  color: var(--primary, #00c2ff);
}

.sidebar-toggle {
  display: none;
}

.main {
  display: grid;
  grid-template-rows: 1fr auto;
  min-height: 0;
  background: #131f30 !important; /* Force dark background */
}

.thread {
  overflow: auto;
  padding: 24px;
  display: flex;
  flex-direction: column;
  gap: 14px;
  background: var(--surface-2, #131f30);
}

.bubble {
  padding: 14px 16px;
  border-radius: 16px;
  border: 1px solid var(--border, rgba(255, 255, 255, 0.08));
  box-shadow: var(--shadow-1, 0 2px 8px rgba(0, 0, 0, 0.15));
  animation: fadeUp 0.18s ease;
}

.bubble.assistant {
  background: linear-gradient(180deg, rgba(0, 194, 255, 0.08), rgba(0, 194, 255, 0.05));
  width: 100%;
}

.bubble.user {
  background: linear-gradient(180deg, rgba(0, 194, 255, 0.35), rgba(0, 194, 255, 0.18));
  border-color: #0e7aa5;
  margin-left: auto;
  max-width: 60%;
}

.bubble .role {
  font-size: 0.8rem;
  color: var(--muted, #8b9ab5);
  margin-bottom: 6px;
}

.composer {
  background: rgba(9, 19, 33, 0.92) !important; /* Force dark with transparency */
  backdrop-filter: saturate(120%) blur(6px);
  border-top: 1px solid rgba(255, 255, 255, 0.06);
  padding: 12px;
  padding-bottom: max(12px, env(safe-area-inset-bottom));
  display: flex;
  gap: 10px;
  align-items: flex-end;
  position: sticky;
  bottom: 0;
  z-index: 60;
}

.textarea {
  flex: 1;
  min-height: 48px;
  max-height: 200px;
  padding: 12px 14px;
  border-radius: 14px;
  border: 1px solid var(--border, rgba(255, 255, 255, 0.08));
  background: var(--surface-2, #131f30);
  color: var(--text, #e6f1ff);
  resize: vertical;
}

.controls {
  display: flex;
  gap: 8px;
}

@keyframes fadeUp {
  from {
    opacity: 0;
    transform: translateY(6px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Additional forced dark styles for maximum compatibility */
.app-shell, .layout, .main,
.chat, .chat-page, .chat-area, .chat-scroll, .chat-body, .chat-canvas {
  background: #0b1621 !important;
  color: #e6f1ff !important;
}

/* Mobile responsive adjustments */
@media (max-width: 1024px) {
  .layout {
    grid-template-columns: 240px 1fr;
  }
}

@media (max-width: 768px) {
  .layout {
    grid-template-columns: 1fr;
  }
  
  .sidebar {
    position: fixed;
    inset: 60px 0 0 0;
    transform: translateX(-100%);
    transition: 0.25s;
    background: var(--surface, #0f1b2a) !important;
    z-index: 100; /* Higher than composer */
  }
  
  .sidebar.open {
    transform: translateX(0);
  }
  
  .sidebar-toggle {
    display: inline-flex;
  }
  
  .bubble.user {
    max-width: 72%;
  }
}

/* Ensure full viewport height on mobile */
@supports (height: 100dvh) {
  .main {
    min-height: 100dvh;
  }
}